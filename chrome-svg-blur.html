<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4.2&nbsp;Avoid blurry rendering of SVG paths in Chromium</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="custom.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--><link rel="shortcut icon" type="image/png" href="https://res.cloudinary.com/kdr2/image/upload/img-kdr2-com/main/k-favicon.png"/><script type="text/x-mathjax-config">MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    displayAlign: "left"
})</script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">He who doesn&rsquo;t blend in</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="preface.html" class="tocviewlink" data-pltdoc="x">Preface</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="whims.html" class="tocviewlink" data-pltdoc="x">Spark, whims!</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="essays.html" class="tocviewlink" data-pltdoc="x">Fly, the unchained!</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="contraptions.html" class="tocviewselflink" data-pltdoc="x">Roll, contraptions!</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="appendices.html" class="tocviewlink" data-pltdoc="x">Appendices</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>4&nbsp;</td><td><a href="contraptions.html" class="tocviewlink" data-pltdoc="x">Roll, contraptions!</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="ads-data.html" class="tocviewlink" data-pltdoc="x">Exporting and Restoring data from Apache<span class="mywbr"> &nbsp;</span>DS</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Avoid blurry rendering of SVG paths in Chromium</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="howto-de-es-chars.html" class="tocviewlink" data-pltdoc="x">How to
type German and Spanish characters</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="scribble-md.html" class="tocviewlink" data-pltdoc="x">Use Markdown in Scribble</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.11</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ads-data.html" title="backward to &quot;4.1 Exporting and Restoring data from ApacheDS&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="contraptions.html" title="up to &quot;4 Roll, contraptions!&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="howto-de-es-chars.html" title="forward to &quot;4.3 How to
type German and Spanish characters&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><h4>4.2<tt>&nbsp;</tt><a name="(part._chrome-svg-blur)"></a>Avoid blurry rendering of SVG paths in Chromium</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>2019-11-04</p></blockquote></blockquote></blockquote><p>In the past few days, I am on a project of rendering PDF files to SVG
files. After some hard work, I finally managed to implement the
renderer, though some features, like translucent images, were not well
supported.</p><p>With my PDF to SVG renderer, I conveniently got many perfect SVG files
from a testing PDF file set. Yeah, these SVG files were perfect when I
viewed them with Firefox, Inkscape, or even gThumb. But soon I found
when I viewed them with Chromium, some of them are not that perfect. A
few characters were too blur to recognize.</p><p>This image is a screenshot of Firefox:</p><p><a href="https://res.cloudinary.com/kdr2/image/upload/img-kdr2-com/2019/11/SVG-Text-Path-Firefox.png" target="_blank"><img src="https://res.cloudinary.com/kdr2/image/upload/c_scale,w_400/img-kdr2-com/2019/11/SVG-Text-Path-Firefox.png" style="width: auto; height: auto; max-width: 100%;"></img></a></p><p>And this is the same file in Chromium:</p><p><a href="https://res.cloudinary.com/kdr2/image/upload/img-kdr2-com/2019/11/SVG-Text-Path-Chromium.png" target="_blank"><img src="https://res.cloudinary.com/kdr2/image/upload/c_scale,w_400/img-kdr2-com/2019/11/SVG-Text-Path-Chromium.png" style="width: auto; height: auto; max-width: 100%;"></img></a></p><p>I&rsquo;d better fix this as the Chromium (and Chrome) is the most popular
browser nowadays. I tried many vain approaches, like trying any
possible value of the <span class="RktSym">shape-rendering</span><span class="RktMeta"></span> attribute for the SVG
files, and none of them worked.</p><p>I didn&rsquo;t know how Chromium renders SVG, but I saw that in the blurrily
rendered SVG file, not all of the characters were murky. So, I thought
if I could finger out the difference of the SVG elements which
contained the clear characters and the murky characters, I would get
the reason. It proved a successful try. I found the murky characters
were in <span class="RktSym">path</span><span class="RktMeta"></span> SVG elements who had a very large value for their
<span class="RktSym">d</span><span class="RktMeta"></span> attribute while the clear ones were in elements with small
<span class="RktSym">d</span><span class="RktMeta"></span> attribute.</p><p>There must be a threshold of the size of <span class="RktSym">d</span><span class="RktMeta"></span> attribute, if a
<span class="RktSym">path</span><span class="RktMeta"></span> element has a value of <span class="RktSym">d</span><span class="RktMeta"></span> larger than it, Chromium
will render that path blurrily. But, instead of going to find that
threshold, I fix my problem empirically: I broke paths represented
long texts into smaller paths corresponding to short texts. In my
case, it is fine to regard text with <span style="font-weight: bold">less than 6 Chinese
characters</span> as short text.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ads-data.html" title="backward to &quot;4.1 Exporting and Restoring data from ApacheDS&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="contraptions.html" title="up to &quot;4 Roll, contraptions!&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="howto-de-es-chars.html" title="forward to &quot;4.3 How to
type German and Spanish characters&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>